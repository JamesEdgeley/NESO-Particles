<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NESO Particles: NESO::Particles::LayerCompressor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NESO Particles
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>NESO</b></li><li class="navelem"><b>Particles</b></li><li class="navelem"><a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html">LayerCompressor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classNESO_1_1Particles_1_1LayerCompressor-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">NESO::Particles::LayerCompressor Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="cell__dat__compression_8hpp_source.html">cell_dat_compression.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2518889e6fdd75424e360912c6ba5c77"><td class="memItemLeft" align="right" valign="top"><a id="a2518889e6fdd75424e360912c6ba5c77"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html#a2518889e6fdd75424e360912c6ba5c77">LayerCompressor</a> (const <a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html">LayerCompressor</a> &amp;st)=delete</td></tr>
<tr class="memdesc:a2518889e6fdd75424e360912c6ba5c77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable (implicit) copies. <br /></td></tr>
<tr class="separator:a2518889e6fdd75424e360912c6ba5c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38f665aa7934eaabd128879fdb076e50"><td class="memItemLeft" align="right" valign="top"><a id="a38f665aa7934eaabd128879fdb076e50"></a>
<a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html">LayerCompressor</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html#a38f665aa7934eaabd128879fdb076e50">operator=</a> (<a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html">LayerCompressor</a> const &amp;a)=delete</td></tr>
<tr class="memdesc:a38f665aa7934eaabd128879fdb076e50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable (implicit) copies. <br /></td></tr>
<tr class="separator:a38f665aa7934eaabd128879fdb076e50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1ef4877add6b9153ddd922dbd93c9a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html#af1ef4877add6b9153ddd922dbd93c9a2">LayerCompressor</a> (SYCLTargetSharedPtr sycl_target, const int ncell, std::map&lt; <a class="el" href="classNESO_1_1Particles_1_1Sym.html">Sym</a>&lt; REAL &gt;, ParticleDatSharedPtr&lt; REAL &gt;&gt; &amp;particle_dats_real, std::map&lt; <a class="el" href="classNESO_1_1Particles_1_1Sym.html">Sym</a>&lt; INT &gt;, ParticleDatSharedPtr&lt; INT &gt;&gt; &amp;particle_dats_int)</td></tr>
<tr class="separator:af1ef4877add6b9153ddd922dbd93c9a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e51fca2b1050972d0a611a77697d3bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html#a2e51fca2b1050972d0a611a77697d3bc">set_cell_id_dat</a> (ParticleDatSharedPtr&lt; INT &gt; cell_id_dat)</td></tr>
<tr class="separator:a2e51fca2b1050972d0a611a77697d3bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15b02b5df24b5b7f4d2547457ce8dce1"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a15b02b5df24b5b7f4d2547457ce8dce1"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html#a15b02b5df24b5b7f4d2547457ce8dce1">compute_remove_compress_indicies</a> (const int npart, T *usm_cells, T *usm_layers)</td></tr>
<tr class="separator:a15b02b5df24b5b7f4d2547457ce8dce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16befa763df7e3517a0523d45aa1ba67"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a16befa763df7e3517a0523d45aa1ba67"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html#a16befa763df7e3517a0523d45aa1ba67">remove_particles</a> (const int npart, T *usm_cells, T *usm_layers)</td></tr>
<tr class="separator:a16befa763df7e3517a0523d45aa1ba67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="classNESO_1_1Particles_1_1LayerCompressor.html">LayerCompressor</a> is a tool to remove rows from ParticleDat instances that correspond to particle data where the particle has been removed. Particles are removed when they move between cells and when they are transferred to other MPI ranks. This ensures that particle data is not duplicated and that the particle data is contiguous. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af1ef4877add6b9153ddd922dbd93c9a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1ef4877add6b9153ddd922dbd93c9a2">&#9670;&nbsp;</a></span>LayerCompressor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">NESO::Particles::LayerCompressor::LayerCompressor </td>
          <td>(</td>
          <td class="paramtype">SYCLTargetSharedPtr&#160;</td>
          <td class="paramname"><em>sycl_target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>ncell</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="classNESO_1_1Particles_1_1Sym.html">Sym</a>&lt; REAL &gt;, ParticleDatSharedPtr&lt; REAL &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>particle_dats_real</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="classNESO_1_1Particles_1_1Sym.html">Sym</a>&lt; INT &gt;, ParticleDatSharedPtr&lt; INT &gt;&gt; &amp;&#160;</td>
          <td class="paramname"><em>particle_dats_int</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Construct a new layer compressor to compress all ParticleDat instances that are contained within the passed containers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sycl_target</td><td>SYCLTargetSharedPtr to use as compute device. </td></tr>
    <tr><td class="paramname">ncell</td><td>Number of cells within each ParticleDat. </td></tr>
    <tr><td class="paramname">particle_dats_real</td><td>Container of ParticleDat instances of REAL type. </td></tr>
    <tr><td class="paramname">particle_dats_int</td><td>Container of ParticleDat instances of INT type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a15b02b5df24b5b7f4d2547457ce8dce1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15b02b5df24b5b7f4d2547457ce8dce1">&#9670;&nbsp;</a></span>compute_remove_compress_indicies()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void NESO::Particles::LayerCompressor::compute_remove_compress_indicies </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>npart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>usm_cells</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>usm_layers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For the specified N particles to remove at the given cells and rows (layers) compute the data migration required to keep the particle data contiguous.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">npart</td><td>Number of particles which are to be removed. </td></tr>
    <tr><td class="paramname">usm_cells</td><td>Device accessible pointers to an array of length N that holds the cells of the particles that are to be removed. </td></tr>
    <tr><td class="paramname">usm_layers</td><td>Device accessible pointers to an array of length N that holds the layers of the particles that are to be removed. </td></tr>
  </table>
  </dd>
</dl>
<p>indicate this particle is removed by setting the / cell index to -1</p>

</div>
</div>
<a id="a16befa763df7e3517a0523d45aa1ba67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16befa763df7e3517a0523d45aa1ba67">&#9670;&nbsp;</a></span>remove_particles()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void NESO::Particles::LayerCompressor::remove_particles </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>npart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>usm_cells</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">T *&#160;</td>
          <td class="paramname"><em>usm_layers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Remove particles from the ParticleDat instances.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">npart</td><td>Number of particles to remove. </td></tr>
    <tr><td class="paramname">usm_cells</td><td>Device accessible pointer to the particle cells. </td></tr>
    <tr><td class="paramname">usm_layers</td><td>Device accessible pointer to the particle rows (layers). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2e51fca2b1050972d0a611a77697d3bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e51fca2b1050972d0a611a77697d3bc">&#9670;&nbsp;</a></span>set_cell_id_dat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void NESO::Particles::LayerCompressor::set_cell_id_dat </td>
          <td>(</td>
          <td class="paramtype">ParticleDatSharedPtr&lt; INT &gt;&#160;</td>
          <td class="paramname"><em>cell_id_dat</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set the ParticleDat which contains the cell ids of the particles. This is not a function which is expected to be called by a user.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cell_id_dat</td><td>ParticleDat containing particle cell ids. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/tmp/repo-checkout/NESO-Particles/include/<a class="el" href="cell__dat__compression_8hpp_source.html">cell_dat_compression.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
